#import "../fragments/flat-wine-variant-fields.graphql"

query GetWineVariant($slug: String!, $locale: LocaleInputType!) {
  FlatWineVariants(where: { slug: { equals: $slug }, isPublished: { equals: true } }, limit: 1, locale: $locale) {
    docs {
      ...FlatWineVariantFields
    }
  }
}

query GetWineVariants($wineTitle: String!, $locale: LocaleInputType!) {
  FlatWineVariants(
    where: { 
      AND: [
        { wineTitle: { equals: $wineTitle } }, 
        { isPublished: { equals: true } }
      ] 
    }, 
    sort: "vintage", 
    locale: $locale
  ) {
    docs {
      ...FlatWineVariantFields
    }
  }
}

query WineDetail($slug: String!, $locale: String!) {
  wineDetail(slug: $slug, locale: $locale) {
    variant {
      ...FlatWineVariantFields
    }
    variants {
      ...FlatWineVariantFields
    }
    relatedVariants {
      type
      title
      variants {
        ...FlatWineVariantFields
      }
    }
    error
  }
} 